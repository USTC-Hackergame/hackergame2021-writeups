# Harry Yu's write-up

æœ¬æ–‡ä¹Ÿå‘å¸ƒäº[æˆ‘çš„ blog ä¸Š](https://blog.harrynull.tech/post/2021/Hackergame-2021-Writeup)

è¿™æ¬¡æ‘¸äº†ä¸ª rank 31 (å·ä¸åŠ¨äº†)ã€‚è¿™é‡ŒæŒ‘äº†å‡ é“æ„Ÿè§‰æ¯”è¾ƒæœ‰æ„æ€çš„é¢˜ç›®å†™ write-upï¼ˆå½“ç„¶ä¸æ˜¯è¯´å…¶å®ƒé¢˜ç›®æ²¡æœ‰æ„æ€å•¦ï¼Œåªæ˜¯æ²¡ä»€ä¹ˆå¥½è®²çš„æˆ–è€…æˆ‘å¤ªèœäº†æ²¡åšå‡ºæ¥ï¼‰ã€‚

## å–ç“œ

> ä½ ï¼šä½ ç§ç§ç°åœ¨å“ªæœ‰ç“œå•Šï¼Ÿè¿™éƒ½æ˜¯å¤§æ£šçš„ç“œï¼Œåªæœ‰ 6 æ–¤ä¸€ä¸ªå’Œ 9 æ–¤ä¸€ä¸ªçš„ï¼Œä½ å«Œè´µæˆ‘è¿˜å«Œè´µå‘¢ã€‚
>
> HQï¼šç»™æˆ‘æ¥ 20 æ–¤çš„ç“œã€‚
>
> ä½ ï¼šè¡Œï¼
> 
> HQï¼šè¡Œï¼Ÿè¿™ç“œèƒ½ç§°å‡º 20 æ–¤å—ï¼Ÿ
>
> ä½ ï¼šæˆ‘å¼€æ°´æœæ‘Šçš„ï¼Œè¿˜ä¸ä¼šç§°é‡ï¼Ÿ
> 
> HQï¼šæˆ‘é—®ä½ è¿™ç“œèƒ½ç§°å‡º 20 æ–¤å—ï¼Ÿ
> 
> ä½ ï¼šä½ æ˜¯æ•…æ„æ‰¾èŒ¬ï¼Œæ˜¯ä¸æ˜¯ï¼Ÿä½ è¦ä¸è¦å§ï¼
> 
> HQï¼šä½ è¿™ç“œè¦æ˜¯åˆšå¥½ 20 æ–¤å—æˆ‘è‚¯å®šè¦å•Šã€‚é‚£å®ƒè¦æ˜¯æ²¡æœ‰æ€ä¹ˆåŠå•Šï¼Ÿ
> 
> ä½ ï¼šè¦æ˜¯ä¸æ˜¯ 20 æ–¤ï¼Œæˆ‘è‡ªå·±åƒäº†å®ƒï¼Œæ»¡æ„äº†å§ï¼Ÿ

![melon.jpg](https://i.loli.net/2021/10/30/fDsuhjzM9d2Bt8x.jpg)

ä¸€å¼€å§‹è€ƒè™‘ç”¨å°æ•°ï¼Œä½†æ˜¯å‘ç°å°±ç®—æ˜¯ç›´æ¥æ”¹ post payload ä¹Ÿä¸ä¼šæ¥å—å°æ•°è¾“å…¥ï¼ˆå¥½åƒä¼šè¢«ç›´æ¥ truncate æ‰ï¼‰ã€‚é¡ºä¾¿è¯•äº†ä¸€ä¸‹è´Ÿæ•°ä¹Ÿä¸å¯ä»¥ã€‚

æ—¢ç„¶å°æ•°å’Œè´Ÿæ•°éƒ½ä¸è¡Œï¼Œé‚£å¾ˆå¤§çš„æ•°å‘¢ï¼Ÿè¯•äº†ä¸€ä¸‹ 2147483647 ä¹Ÿä¸ä¼šå¯¼è‡´æº¢å‡ºã€‚æœ¬ä»¥ä¸ºæ˜¯ä¸è¡Œäº†ï¼Œç„¶åçªç„¶æƒ³èµ·æ¥æ—¶ä»£å˜äº†ï¼Œç°åœ¨éƒ½æ˜¯ 64 ä½äº†ã€‚è¯•äº†ä¸€ä¸‹ `9223372036854775807/6 = 1537228672809130000 + 6`ï¼Œæœç„¶æº¢å‡ºäº†ã€‚

```php
  intval(6+1537228672809130000*6)+(1537228672809128622)*6 == 20
```

## é€æ˜çš„æ–‡ä»¶
è¿™é“é¢˜ç›®ç»™äº†ä¸€ä¸ªåŒ…æ‹¬å¾ˆå¤š ANSI escape sequence çš„æ–‡ä»¶ï¼Œå½¢å¦‚ä¸‹
```
[0;0H[20;58H[8;34H[13;27H[4;2H[38;2;1;204;177m [39m[14;10H[20;51H[23;4H[12;2H[38;2;2;207;173m [39m[19;61H[9;12H[22;8H[20;2H[38;2;3;210;169m [39m[3;23H[8;68H[19;10H[4;3H[38;2;4;214;165m [39m[19;23H[17;34H[11;52H[22;70H[12;3H[38;2;5;217;161m [39m[24;22H[2;25H[19;76H[19;3H[38;2;6;220;157m [39m[23;14H[21;12H[10;37H[2;37H[22;66H[16;45H[21;3H[38;2;7;222;153m [39m[10;47H[18;34H[23;3H[38;2;8;225;149m
```

ç®€å•çœ‹äº†ä¸‹å‘ç°å¹¶æ²¡æœ‰ç©ºæ ¼ä»¥å¤–çš„å­—ç¬¦ï¼Œè€Œä¸”æ‰€æœ‰ \e ä¹Ÿéƒ½è¢«å¼„æ²¡äº†ï¼Œä¹Ÿå°±æ˜¯è¯´è‚¯å®šæ²¡æ³•é€šè¿‡ `echo -e $(cat transparent.txt)` è¿™ç§æ–¹æ³•ç›´æ¥æŸ¥çœ‹åˆ° flagã€‚

äºæ˜¯ä¸Šç½‘æ‰¾åˆ°äº†ä¸€ä¸ª python çš„ [ANSI è§£æåº“](https://github.com/helgefmi/ansiterm)ï¼Œé­”æ”¹äº†ä¸€ä¸‹ä»£ç è®©å®ƒæ”¯æŒä¸å¸¦ `\e` çš„ escape sequenceï¼Œç„¶åè¾“å‡ºæ‰€æœ‰ä¿®æ”¹è¿‡çš„ä½ç½®ï¼š

```python
    term = Ansiterm(25, 80)
    term.feed(f.read())
    tiles = Counter()
    for y in range(25):
        for tile in term.get_tiles(y * 80, y * 80 + 80):
            tiles[repr(tile.color)] += 1
    default = "{'fg': 37, 'bg': 40, 'reverse': False, 'bold': False}"
    print('\n'.join(
        ''.join(['x' if repr(tile.color) != default else ' ' for tile in term.get_tiles(y * 80, y * 80 + 80)]) for y
        in range(25)))
```

è¾“å‡ºå¦‚ä¸‹
```

    xx  xx                       xx          x
   x     x     xxx              x            x
 xxxxx   x        x    xxx      x     xxx    x     x   x
   x     x     xxxx   x   xx  xx         x   xxxx   x x   xxxx  xxxx
   x     x    x   x   x   x     x     xxxx   x   x   x    x   x x   x
   x     x    x   x    xxxx     x    x   x   x   x  x x   x   x x   x
   x      xx   xxx x      x      xx   xxx x  xxxx  x   x  x   x x   x
                       xxx
   x          x      x             xx
              x      x              x
 xxx    xxx   x      x  x   xxx     x     xxx xx    xxxx  xxx  x  x  x
   x   x   x  xxxx   x x       x    x     x  x  x  x     x   x x  x  x
   x   x   x  x   x  xx     xxxx    x     x  x  x  x     x   x x  x  x
   x   x   x  x   x  x x   x   x    x     x  x  x  x     x   x  x x x
    x   xxx   x   x  x  x   xxx x    xx   x  x  x   xxxx  xxx    x x

                         x     x   xxx   xx                 xx
  xxxx   xxx   x   x    x         x   x   x           x       x
 x          x  x   x  xxxxx  xxx  x   x   x    xxx  xxxxx     x
  xxxx   xxxx   xxxx    x      x   xxxx   x   x   x   x        xx
      x x   x      x    x      x      x   x   xxxxx   x       x
  xxxx   xxx x    x     x      x  x   x   x   x       x  x    x
                 x      x       x  xxx     xx  xxx     xx   xx
```

## FLAG åŠ©åŠ›å¤§çº¢åŒ…

![ip.jpg](https://i.loli.net/2021/10/30/tcrkp2EdU3iGeNq.jpg)
è¿™é¢˜æ˜¯ä¸ª pdd å¥—è·¯ï¼Œéœ€è¦ 256 ä¸ªä¸åŒçš„ /8 ip åœ°å€ç ä¸€åˆ€æ‰èƒ½è·å¾— flagã€‚

> 4. æ¯ä¸ªç”¨æˆ·åªèƒ½å¤ŸåŠ©åŠ›ä¸€æ¬¡ã€‚ä¸ºäº†å»ºè®¾ä¸–ç•Œä¸€æµå¤§ç åˆ€å¹³å°ï¼Œæ´»åŠ¨è¦æ±‚ä½äºåŒä¸€ /8 ç½‘æ®µçš„ç”¨æˆ·å°†ä¼šè¢«è§†ä¸ºåŒä¸€ä¸ªç”¨æˆ·ã€‚ï¼ˆæ¯”å¦‚ IP åœ°å€ä¸º 202.38.64.1 å’Œ 202.39.64.1 å°†è¢«è§†ä¸ºåŒä¸€ç”¨æˆ·ã€‚ï¼‰è¾¾åˆ°åŠ©åŠ›æ¬¡æ•°ä¸Šçº¿åï¼Œå°†æ— æ³•å†å¸®åŠ©å¥½å‹åŠ©åŠ›ã€‚æˆ‘ä»¬ä½¿ç”¨å‰åç«¯æ–¹å¼æ£€æŸ¥ç”¨æˆ·çš„ IP ã€‚

ç®€å•è¯•äº†ä¸‹ï¼Œå‘ç°æ˜¯ç»å…¸çš„ `X-FORWARDED-FOR`ï¼Œäºæ˜¯ç›´æ¥å†™è„šæœ¬æ„é€ è¯·æ±‚ã€‚å”¯ä¸€çš„å‘å°±æ˜¯æœ‰è¯·æ±‚é™é€Ÿï¼Œæ‰€ä»¥æˆ‘è¿˜åŠ äº†ä¸ªé‡è¯•å¾ªç¯ã€‚

```python
succeed_ip=[]
while len(succeed_ip)!=256:
    for i in range(0,256):
        ip = f'{i}.1.1.1'
        if ip in succeed_ip: continue
        txt=requests.post('http://202.38.93.111:10888/invite/9900a95d-3a58-47c6-8a88-89a093ff9f16',
                            data={'ip':ip}, headers={'X-FORWARDED-FOR':ip}).text
        suc = 'æˆåŠŸ' in txt
        print(ip, suc)
        if suc:
            succeed_ip.append(ip)
```

## åŠ å¯†çš„ U ç›˜

è¿™é“é¢˜ç»™äº†ä¸¤ä¸ª LUKS ï¼ˆLinux Unified Key Setupï¼‰åŠ å¯†çš„é•œåƒï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªé•œåƒçš„å¯†ç æ˜¯å·²çŸ¥çš„ã€‚è§£å¯†å‡ºæ¥å‘ç°æ˜¯ä¸€ä¸ª`éšæœºè¿‡ç¨‹.txt`ï¼Œé‡Œé¢æ˜¯ä¸€äº›æ•°å­¦ç¬”è®°ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ã€‚åŠ å¯†æ–¹å¼çœ‹äº†çœ¼æ˜¯ `aes-xts-plain64`ã€‚

â€¦â€¦ç„¶åæˆ‘å°±è·‘åäº†ï¼Œä»¥ä¸ºæ˜¯ä¸€ä¸ª known-plaintext attackã€‚å•ƒäº†åŠå¤©èµ„æ–™ç„¶åçœ‹äº†ä¸€çœ¼è¿™é“é¢˜ `general` çš„ tagï¼Œåˆçœ‹äº†ä¸‹é€šå…³äººæ•°ï¼Œæ„Ÿè§‰ä¸å¤§å¯¹ã€‚ç„¶åæˆ‘åœ¨ä¸€æ¬¡é”™è¯¯çš„è§£å¯†å°è¯•ä¸­ï¼Œæƒ³åˆ°äº†è¯¥ä¸ä¼š passphrase å’ŒåŠ å¯†ç”¨çš„ key æ˜¯ä¸åŒçš„å§ï¼ˆåºŸè¯ï¼‰ã€‚äºæ˜¯å°±äº†è§£åˆ°äº† master key è¿™ä¹ˆä¸ªä¸œè¥¿ã€‚

![meme1.jpg](https://i.loli.net/2021/10/30/mBenN6JK4z72FrM.jpg)

```sh
 sudo cryptsetup luksDump --dump-master-key /dev/loop1p1 # è·å¾— masterkey çš„
 cat masterkey| xxd -r -p > masterkey.bin
 sudo cryptsetup --master-key-file masterkey.bin luksOpen /dev/loop1p1 day2
 mount /dev/mapper/day2 ./day2
 mkdir day2
 sudo mount /dev/mapper/day2 ./day2
 cat day2/flag.txt
```

## å›¾ä¹‹ä¸Šçš„ä¿¡æ¯

ä» graphql ä¸Šæ‹¿æ•°æ®çš„ç™½ç»™é¢˜ã€‚

![graphql.gif](https://i.loli.net/2021/10/30/kZHUCPoj7fSBFph.gif)

## èµ›åšå¨æˆ¿

è¿™é“é¢˜æœ¬è´¨ä¸Šæ˜¯ä¸ªæŒ–çŸ¿é¢˜ï¼ˆé›¾ï¼‰ã€‚å‰ä¸¤é¢˜éƒ½æ˜¯æ•™ç¨‹ï¼Œå°±ä¸è®²äº†ã€‚ç¬¬å››å°é¢˜æˆ‘æ²¡åšå‡ºæ¥ï¼Œä¹Ÿä¸è®²äº†ï¼ˆxï¼‰ï¼Œé‡ç‚¹è¯´ä¸‹ç¬¬ä¸‰é¢˜ã€‚

é€šè¿‡é˜…è¯»ä»£ç å¾—çŸ¥ï¼Œæ¯ä¸€å¤©çš„èœè°±æ˜¯ç”± `sha256( '\n'.join(sha256(prog) for prog in programs) )` ç®—å‡ºæ¥çš„å€¼ä½œä¸ºéšæœºæ•°ç§å­ï¼Œç„¶å ARC4 éšæœºç”Ÿæˆå‡ºæ¥çš„ã€‚ç”±äº hash å’Œéšæœºæ•°ç®—æ³•éƒ½æŒºæ­£ç»çš„ï¼Œå¤§æ¦‚æ˜¯æ²¡æ³•ç›´æ¥ç¢°æ’äº†ã€‚

çœ‹äº†ä¸‹è¿™é“é¢˜ç›®æœ‰ 32 ç§ä¸åŒçš„èœï¼ŒéšæœºæŒ‘é€‰ 6 ä¸ªï¼ˆæœ‰é¡ºåºï¼‰ï¼Œé‚£ä¹ˆæœ‰ P(32,6)=652458240 ç§å¯èƒ½æ€§ã€‚æ„Ÿè§‰åªè¦è¿æ°”å¥½ï¼Œè¿˜æ˜¯å¯ä»¥è·‘å‡ºæ¥çš„ã€‚äºæ˜¯æ‰‹åŠ¨å®ç°äº†ä¸€ä¸‹ ARC4 éšæœºç®—æ³•ï¼ˆæ²¡æ‰¾åˆ°ç°æˆçš„åº“ï¼‰ï¼Œç„¶åç”¨å·¨å¿«çš„ pypy è·‘ï¼ˆå…¶å® cpp åº”è¯¥æ›´å¿«ï¼Œåªæ˜¯æ‡’äº†ï¼‰ã€‚

ä»£ç å†™å¾—ä¸‘å°±ä¸è´´äº†ï¼Œæ€è·¯å°±æ˜¯å…ˆåˆ›å»º 32 ä¸ªç¨‹åºåˆ†åˆ«å¯¹åº”èœè°±ä¸º 0,0,0,0,0,0; 1,1,1,1,1,1 ...å³å…­ä¸ªéƒ½ä¸€æ ·çš„åœºæ™¯ã€‚ç„¶åå¼€å§‹å†™ä¸€ä¸ª dummy ç¨‹åºï¼Œå†…å®¹ä¸é‡è¦ï¼Œèƒ½è¿‡æ£€æŸ¥å°±å¥½ã€‚

æˆ‘è·‘å‡ºæ¥çš„ç»“æœå¦‚ä¸‹ï¼š
```
å‘å³ 1 æ­¥\næ‹¿èµ· 6 ä¸ªç‰©å“\nå‘å·¦ 1 æ­¥\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“
å‘å³ 2 æ­¥\næ‹¿èµ· 6 ä¸ªç‰©å“\nå‘å·¦ 2 æ­¥\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“
...
å‘å³ 32 æ­¥\næ‹¿èµ· 6 ä¸ªç‰©å“\nå‘å·¦ 32 æ­¥\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“\næ”¾ä¸‹ 1 ä¸ªç‰©å“
å‘å·¦ 1912766784062 æ­¥
```

è¿™æ ·å°±å¯ä»¥è·‘å‡ºæ¥ä¸€ä¸ªæˆ‘ä»¬å·²æœ‰çš„32ç¨‹åºå¯ä»¥è§£å†³çš„èœè°±ã€‚å…¶å®ç”¨ 128 ä¸ªç¨‹åºï¼ˆä¸Šé™ï¼‰æ›´å¿«ï¼Œä½†æ˜¯æˆ‘æ‡’äº†ï¼ˆ

## é©¬èµ›å…‹

![qr_raw.jpg](https://i.loli.net/2021/10/30/Dy3B6QTzvco59XF.jpg)

æˆ‘æœ€å–œæ¬¢çš„ä¸€é“é¢˜ç›®ä¹‹ä¸€ï¼Œè¦ä»æ‰“äº†é©¬èµ›å…‹çš„äºŒç»´ç ä¸­è¿˜åŸä¿¡æ¯ã€‚ä¹ä¸€çœ‹æ„Ÿè§‰ä¸å¤§å¯èƒ½ï¼Œä½†æ˜¯å…¶å®æ¯ä¸ªé©¬èµ›å…‹å—çš„ç°åº¦æ•°å€¼å…¶å®æä¾›äº†å¾ˆå¤šä¿¡æ¯ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æšä¸¾å…¶è¦†ç›–çš„äºŒç»´ç å—æ¥æ‰¾åˆ°ä¼šäº§ç”Ÿä¸€è‡´çš„é©¬èµ›å…‹å—çš„æƒ…å†µã€‚å½“ç„¶å¦‚æœåŒæ—¶è¦†ç›–äº† 2*2 çš„å—é‚£å°±æ²¡åŠæ³•äº†ï¼Œä¸è¿‡äºŒç»´ç æœ¬èº«ä¹Ÿæ˜¯æœ‰çº é”™èƒ½åŠ›çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦å®Œå…¨è¿˜åŸã€‚

è„šæœ¬åœ¨è¿™é‡Œï¼š[https://gist.github.com/harrynull/10e03907e835c48b7fbae72109381769](qr_mosaic_recovery.py)ã€‚å†™çš„æ¯”è¾ƒä¹±ï¼Œè€Œä¸”è¦ç¨å¾®æ”¹ä¸€ä¸‹æ‰å¯ä»¥è·‘ã€‚è·‘å‡ºæ¥çš„ç»“æœå¦‚ä¸‹ï¼š

![result.png](https://i.loli.net/2021/10/30/n9GRpPozYMuewyh.png)

## minecRaft

è¿™ä¸€é¢˜å…¶å®å°±æ˜¯åæ··æ·†æºç ï¼Œç„¶åä»å¸¸æ•°å‘ç°æ˜¯ç”¨çš„ XTEA åŠ å¯†ã€‚ç»™äº†å¯†æ–‡å’Œå¯†é’¥æ±‚æ˜æ–‡ã€‚å”¯ä¸€æ‹¿å‡ºæ¥æä¸€ä¸‹çš„åŸå› æ˜¯æˆ‘åˆä»¥ä¸ºè¿™æ˜¯é“å¯†ç å­¦é¢˜äº†ï¼Œå› ä¸ºæˆ‘ä¸€å¼€å§‹åæ··æ·†å‡ºæ¥ä»¥ä¸ºæ˜¯ç»™äº†æ˜æ–‡å’Œå¯†æ–‡æ±‚å¯†é’¥ï¼Œçœ‹äº†ä¸‹ web æ ‡ç­¾å’Œè¿‡å…³äººæ•°æˆ‘æ‰æ¸…é†’è¿‡æ¥ã€‚

![meme2.jpg](https://i.loli.net/2021/10/30/Ofh1yNugPGWAVeM.jpg)

## JUST BE FUN
å¾ˆæœ‰æ„æ€çš„é¢˜ç›®ï¼Œä½†æ˜¯ä¹Ÿå¾ˆç¹çã€‚é¢˜ç›®å®šä¹‰äº†ä¸€ç§èˆ¹æ–°çš„ã€ä¸‰ç»´çš„ã€åªæœ‰æ ˆçš„è¯­è¨€ï¼Œè¦å®ç° + * shift or xor pow è¿ç®—ã€‚ä½œè€…å”¯ä¸€çš„æ¸©æŸ”æ˜¯æ‰€æœ‰çš„æ•°å­—éƒ½æ˜¯ä¸€ä½æ•°ï¼Œæ‰€ä»¥ä¸ç”¨å†™ readint äº†ã€‚ç¨å¾®å†™äº†ä¸€ç‚¹ä¹‹åæ„Ÿè§‰å¤ªéº»çƒ¦äº†äºæ˜¯è‡ªå·±ç¼–äº†ä¸€ä¸ª[è¯­è¨€](https://gist.github.com/harrynull/c011c8949f4cba1551e3d840805347ed)å’Œä¸€ä¸ª[ç¼–è¯‘å™¨](https://gist.github.com/harrynull/24a7ab92ae48b318c158539daac5e148)ï¼Œå†™äº†400+è¡Œä»£ç ï¼ˆå…¶å®æ„Ÿè§‰æ›´éº»çƒ¦äº†å§å–‚ï¼‰ã€‚

è‡ªç¼–è¯­è¨€éƒ¨åˆ†ä»£ç ï¼š
```
# === handle | ===
$|
!s
nop*
!s
>
# pop the operator
pop
# res = 0
# i = 1
0
1

# [op1, op2, res, i]
@or_while_cond
#while a + b != 0:
>
fetch 3
fetch 5
+
@or_while
|*
# a+b >= 0: UP
wrap up
#    if a % 2 + b % 2 != 0:
fetch 3
2
%
fetch 5
2
%
+
@or_bit_not_zero
|*
wrap up
#        res += i
# [op1, op2, res, i]
dup
# [op1, op2, res, i, i]
1
3
\
# [op1, op2, i, i, res]
+
# [op1, op2, i, RES]
1
2
\
# end if }
>
```

ç¼–è¯‘ç»“æœå¦‚ä¸‹ï¼š
![diagram.jpg](https://i.loli.net/2021/10/30/AQtoTH57BkEz6cY.jpg)

## pğŸ˜­q
æœ€å–œæ¬¢çš„é¢˜ç›®ä¹‹ä¸€ï¼Œä»é¢‘è°±åŠ¨ç”»æ¥è¿˜åŸéŸ³é¢‘ã€‚ä¸€ä»¶æˆ‘ä»æ¥æ²¡æƒ³è¿‡å¯è¡Œï¼Œä½†æ˜¯ä¸€æƒ³å´è§‰å¾—å¾ˆåˆç†çš„äº‹æƒ…ã€‚

![flag.gif](https://i.loli.net/2021/10/30/2SeDHPmog7QE6uv.gif)


è¿™é“é¢˜ç›®çš„æ­£è§£å½“ç„¶æ˜¯æ‰¾ä¸€ä½ hifi å‘çƒ§å‹ç›¯ç€ gif çœ‹ä¸€ä¸‹ç„¶åè„‘å†…è¿˜åŸéŸ³é¢‘ï¼ˆbushiï¼‰ã€‚ä½†æ˜¯æˆ‘é™„è¿‘æ²¡æœ‰å‘çƒ§å‹æ‰€ä»¥æˆ‘åªèƒ½å†™ä»£ç è¿˜åŸã€‚

```python
gif = Image.open("./flag.gif")
frames = []
for frame in range(8, gif.n_frames):
    gif.seek(frame)
    frames.append(np.sum(np.array(gif), axis=0)[3::4] + min_db)

frames = np.asarray(frames).transpose()
y_inv = librosa.feature.inverse.mel_to_audio(
    librosa.db_to_power(frames),
    n_fft=fft_window_size,
    hop_length=frame_step_size,
    window=window_function_type
)
sf.write('output.wav', y_inv, 22050, 'PCM_24')  # 634bil 971 mil 243 tho 582
```
